version: 1

defaults:
  region: ap-northeast-1

targets:
  profiles: [] # 空なら ~/.aws/config から自動取得
  exclude:
    - SAMPLE_PROFILE

vars:
  envMap:
    XXX_PRD: xxx

cmd:
  - name: check-sts
    run: ["sts", "get-caller-identity"]

  - name: list-s3
    run: ["s3api", "list-buckets"]

  - name: create-s3bucket
    run:
      [
        "s3api",
        "create-bucket",
        "--bucket",
        "s3-${ENV}-bucket-${ACCOUNT_ID}",
        "--create-bucket-configuration",
        "LocationConstraint=${REGION}",
      ]